# 11 스태틱의 이해 
- 스태틱 예약어 static은 변수 및 메서드, 그리고 지정한 영역에서 붙일 수 있습니다. 자바 프로그래밍에서 스태틱 예약어를 붙이면 어떻게 동작하는지 직접 보면서 확인하고 이해해보도록 하겠습니다. 추가적으로 스태틱의 다양한 사용 방법도 살펴보겠습니다.

## 1. 스태틱(Static)
앞에서 메서드 영역을 설명할 때 스태틱(static) 변수 및 스태틱(static) 메서드는 메서드 영역에 저장되며, 프로그램 시작 전에 로드되고 프로그램 종료 시 소멸된다라고 설명드렸습니다. 

`1번` 코드가 메서드 영역에 다 로딩되면 `2번` 그중에서 스태틱으로 지정된 변수와 메서드는 메서드 영역 내 스태택 영역으로 옮겨집니다. 

![179_static_structure](https://github.com/user-attachments/assets/3bcbb4f3-5422-45aa-a411-ded28e9980be)

먼저 추려내져야 하는 변수와 메서드가 있다면 static 예약어 표시를 하여 메모리의 특정 영역에 따로, 그리고 미리 로딩시켜놓은 것뿐입니다. 이때 스태틱 변수(정적 변수)는 값이 메모리에 로딩될 때 대입되고 블록이 있다면 메모리에 로딩될 때 실행됩니다. 메서드는 누가 호출해줘야 실행이 되는 것이기 때문에 로딩만 됩니다. 

## 2. 전역 변수로 사용
메서드 영역 내 스태틱 영역의 변수 및 메서드는 어떤 객체에서도 접근해서 사용할 수 있습니다. 그렇기에 스태택 변수를 전역 변수라고 부르기도 합니다. 

스태틱 변수를 전역 변수로 어떻게 사용할 수 있는지 예제를 통해 알아보겠습니다. 

먼저 프로젝트를 만들고 클래스 파일을 추가해 아래와 같이 코드를 작성해줍니다. 이번에는 .java 파일 하나에 클래스 두 개를 작성합니다. 스태틱 변수를 갖는 클래스의 객체 두 개를 만들어볼 겁니다. 그 안에 들어 있는 스태틱 변수가 각자 생기는지 하나인지 확인해보겠습니다. 

![180_static_example_code1](https://github.com/user-attachments/assets/185970fc-425f-42e6-96b6-fc61f65550d5)
![181_static_example_code1_result](https://github.com/user-attachments/assets/82b24eb6-6f91-4694-9cfb-4ef5d4185001)

`1번` Cat 클래스의 int형 변수 a에 static 예약어가 붙어 있습니다. 이 변수는 a는 프로그램이 시작하기도 전에 메서드 영역 내 스태틱 영역에 생성되어 있을 겁니다. 그리고 누구나 접근하여 사용할 수 있게 됩니다. 

프로그램이 실행되면 `2번`부터 실행이 됩니다. `3번`에서 main의 지역변수 num1, num2 변수가 선언되고 값을 대입받습니다. 

`4번`에서 Cat 클래스형의 cat1 변수를 스택 영역에 생성합니다. Cat 클래스형의 객체를 힙 영역에 생성합니다. cat 변수에 생성된 객체를 참조할 수 있는 id값을 대입합니다. 

이때 맴버 변수 a는 static 예약어가 붙어 있으므로 여기서 만들지 않습니다. 프로그램 실행 전에 미리 만들어져 있을 겁니다. 

`5번` cat1의 인스턴스(instance) 변수 num에 값을 대입합니다. num은 힙 영역에 생성된 객체 안에 있습니다. `6번` cat1의 스태틱(static) 변수 a에 값을 대입합니다. a는 메서드 영역 내 스태틱 영역에 생성되어 있던 겁니다. `7번` cat1의 메서드를 통해 맴버 변수의 값을 출력합니다. `8번` cat1의 인스턴스(instance) 변수 num에, `9번` cat1의 스태틱 변수 a에 직접 접근해서 값을 가져와 출력합니다. 

`10번` Cat 클래스형의 cat2 변수를 스택 영역에 생성합니다. Cat 클래스형의 객체를 힙 영역에 생성합니다. cat2 변수에 생성된 객체를 참조할 수 있는 id값을 대입합니다. 이때 맴버 변수 a는 static 예약어가 붙어 있으므로 여기서 만들지 않습니다. 프로그램 실행 전에 미리 만들어져 있을 겁니다. 

`11번` cat2의 인스턴스 변수 num에 값을 대입합니다. num은 힙 영역에 생성된 객체 안에 생성되어 있습니다. `12번` cat2의 스태틱 변수 a에 값을 대입합니다. a는 메서드 영역 내 스태틱 영역에 생성되어 있던 겁니다. `13번` cat2의 메서드를 통해 맴버 변수의 값을 출력합니다. 

`14번` cat2의 인스턴스 변수 num에 `15번` cat2의 스태틱 변수 a에 `16번` cat1의 스태틱 변수 a에 직접 접근해서 값을 가져와 출력합니다. 

cat2.a값을 바꾸었는데 cat1.a값도 바뀌었습니다. a는 스태틱 변수라서 cat2.a와 cat1.a 둘 다 같은 a를 가리키고 있기 때문입니다. 

위 과정을 자바의 메모리 모델에 그림으로 표현하면 다음과 같습니다. 

![182_static_var_structure](https://github.com/user-attachments/assets/83a45082-b986-4773-85c2-70a380696250)

생성된 위치 때문에 a는 스태틱 변수, num은 인스턴스 변수라고도 부릅니다. 그리고 스태틱 변수는 예제에서 본 것 처럼 모든 클래스에서 다 접근해서 사용할 수 있기 때문에 전역(global) 변수라고도 부릅니다. 

스태틱에 관련해서는 위 이미지에서 "3번" '코드가 로드되고 프로그램이 실행되기 전에 미리 로딩되어 있다'만 이해하면 쉽게 사용할 수 있을 겁니다.
